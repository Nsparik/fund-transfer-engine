# ══════════════════════════════════════════════════════════════════════════════
# .env.example — Template. Copy to .env and fill in real values.
#
#   cp .env.example .env
#
# The .env file is gitignored. NEVER commit real credentials.
# ══════════════════════════════════════════════════════════════════════════════

# ─── Symfony ──────────────────────────────────────────────────────────────────
APP_ENV=dev
# Generate with: bin/console secrets:generate-keys  OR  openssl rand -hex 32
APP_SECRET=replace_with_32_hex_chars

# ─── Apache ───────────────────────────────────────────────────────────────────
# Port Apache binds on the host machine
APACHE_PORT=8080

# ─── Docker User (Linux only) ─────────────────────────────────────────────────
# Run `id -u` and `id -g` on your Linux host to get these values.
# On macOS with Docker Desktop, these are ignored (UID mapping is automatic).
APP_UID=1000
APP_GID=1000

# ─── MySQL ────────────────────────────────────────────────────────────────────
MYSQL_ROOT_PASSWORD=change_me_root_password
MYSQL_DATABASE=fund_transfer
MYSQL_USER=fund_user
MYSQL_PASSWORD=change_me_app_password

# ─── Doctrine DBAL + ORM ──────────────────────────────────────────────────────
# Host must be the Docker service name ('mysql').  serverVersion must match the
# image tag in docker-compose.yml.
DATABASE_URL="mysql://fund_user:change_me_app_password@mysql:3306/fund_transfer?serverVersion=8.0&charset=utf8mb4"

# ─── Redis ────────────────────────────────────────────────────────────────────
REDIS_PASSWORD=change_me_redis_password
REDIS_URL="redis://:change_me_redis_password@redis:6379"

# ─── Routing (CLI URL generation) ─────────────────────────────────────────────
# Used by bin/console when generating absolute URLs outside an HTTP request.
DEFAULT_URI=http://localhost:8080

# ─── Trusted Proxies ─────────────────────────────────────────────────────────
# Symfony reads X-Forwarded-* headers ONLY from these IPs.
# Required by config/packages/framework.yaml — must not be empty.
#
# Development (direct Apache → PHP-FPM, no load balancer):
#   TRUSTED_PROXIES=127.0.0.1,REMOTE_ADDR
#
# Production (behind AWS ALB / Nginx / Cloudflare):
#   TRUSTED_PROXIES=<load-balancer-ip>,REMOTE_ADDR
#
# REMOTE_ADDR is a Symfony sentinel that trusts the connecting IP dynamically.
TRUSTED_PROXIES=127.0.0.1,REMOTE_ADDR

# ─── PHP OPcache ──────────────────────────────────────────────────────────────
# 1 = revalidate on every request (dev with volume mount)
# 0 = never revalidate (production immutable image)
PHP_OPCACHE_VALIDATE_TIMESTAMPS=1
